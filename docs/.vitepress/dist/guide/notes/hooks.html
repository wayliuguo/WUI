<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>hooks | W-UI</title>
    <meta name="description" content="W-UI">
    <link rel="preload stylesheet" href="/wui/assets/style.17e71fe9.css" as="style">
    <script type="module" src="/wui/assets/app.eaf4af7a.js"></script>
    <link rel="preload" href="/wui/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/wui/assets/chunks/framework.4015372c.js">
  <link rel="modulepreload" href="/wui/assets/chunks/theme.ac736a04.js">
  <link rel="modulepreload" href="/wui/assets/chunks/index.495254c3.js">
  <link rel="modulepreload" href="/wui/assets/guide_notes_hooks.md.89ec0107.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-74341577><!--[--><!--]--><!--[--><span tabindex="-1" data-v-ca0f91c2></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-ca0f91c2> Skip to content </a><!--]--><!----><header class="VPNav" data-v-74341577 data-v-98bf47f0><div class="VPNavBar has-sidebar" data-v-98bf47f0 data-v-6a8586ad><div class="container" data-v-6a8586ad><div class="title" data-v-6a8586ad><div class="VPNavBarTitle has-sidebar" data-v-6a8586ad data-v-04508eda><a class="title" href="/wui/" data-v-04508eda><!--[--><!--]--><!----><!--[-->W-UI<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-6a8586ad><div class="curtain" data-v-6a8586ad></div><div class="content-body" data-v-6a8586ad><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-6a8586ad><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6a8586ad data-v-1cdd85cf><span id="main-nav-aria-label" class="visually-hidden" data-v-1cdd85cf>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/wui/guide/installation.html" tabindex="0" data-v-1cdd85cf data-v-260170b2 data-v-fdcb1ff4><!--[-->指南<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/wui/component/button.html" tabindex="0" data-v-1cdd85cf data-v-260170b2 data-v-fdcb1ff4><!--[-->组件<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6a8586ad data-v-43764607><label title="toggle dark mode" data-v-43764607 data-v-c6fae2ac><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-c6fae2ac data-v-ccfde87d><span class="check" data-v-ccfde87d><span class="icon" data-v-ccfde87d><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-c6fae2ac><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-c6fae2ac><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-6a8586ad data-v-34170014 data-v-d594c0dc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d594c0dc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-d594c0dc><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-d594c0dc><div class="VPMenu" data-v-d594c0dc data-v-e8b21dfa><!----><!--[--><!--[--><!----><div class="group" data-v-34170014><div class="item appearance" data-v-34170014><p class="label" data-v-34170014>Appearance</p><div class="appearance-action" data-v-34170014><label title="toggle dark mode" data-v-34170014 data-v-c6fae2ac><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-c6fae2ac data-v-ccfde87d><span class="check" data-v-ccfde87d><span class="icon" data-v-ccfde87d><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-c6fae2ac><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-c6fae2ac><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6a8586ad data-v-8e03eb06><span class="container" data-v-8e03eb06><span class="top" data-v-8e03eb06></span><span class="middle" data-v-8e03eb06></span><span class="bottom" data-v-8e03eb06></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-74341577 data-v-8129c5fa><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-8129c5fa><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-8129c5fa><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-8129c5fa>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-8129c5fa data-v-78cfb33f><button data-v-78cfb33f>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-74341577 data-v-1864c444><div class="curtain" data-v-1864c444></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-1864c444><span class="visually-hidden" id="sidebar-aria-label" data-v-1864c444> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-1864c444><section class="VPSidebarItem level-0" data-v-1864c444 data-v-2fab235f><div class="item" role="button" tabindex="0" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><h2 class="text" data-v-2fab235f>指南</h2><!----></div><div class="items" data-v-2fab235f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/installation.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>安装</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/quieStart.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>快速开始</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-1864c444><section class="VPSidebarItem level-0 has-active" data-v-1864c444 data-v-2fab235f><div class="item" role="button" tabindex="0" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><h2 class="text" data-v-2fab235f>笔记</h2><!----></div><div class="items" data-v-2fab235f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/project.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>工程搭建</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/vue.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>vue</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/utilsFunction.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>工具函数</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/hooks.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>hooks</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/loading.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Loading 加载</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/badge.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Badge 徽标</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/icon.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Icon 图标</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/button.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Button 按钮</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/cell.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Cell 单元格</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/space.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Space 间距</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/row.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Layout Row </p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/col.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Layout Col</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/checker.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Checker</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/radio.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Radio</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/radioGroup.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>RadioGroup</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/checkbox.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Checkbox</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/checkboxGroup.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>CheckboxGroup</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/overlay.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Overlay</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/popup.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Popup</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-2fab235f data-v-2fab235f><div class="item" data-v-2fab235f><div class="indicator" data-v-2fab235f></div><a class="VPLink link link" href="/wui/guide/notes/toast.html" data-v-2fab235f data-v-fdcb1ff4><!--[--><p class="text" data-v-2fab235f>Toast</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-74341577 data-v-9d8d9d32><div class="VPDoc has-sidebar has-aside" data-v-9d8d9d32 data-v-6c002a39><!--[--><!--]--><div class="container" data-v-6c002a39><div class="aside" data-v-6c002a39><div class="aside-curtain" data-v-6c002a39></div><div class="aside-container" data-v-6c002a39><div class="aside-content" data-v-6c002a39><div class="VPDocAside" data-v-6c002a39 data-v-aef52c28><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-aef52c28 data-v-6292888b><div class="content" data-v-6292888b><div class="outline-marker" data-v-6292888b></div><div class="outline-title" data-v-6292888b>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-6292888b><span class="visually-hidden" id="doc-outline-aria-label" data-v-6292888b> Table of Contents for current page </span><ul class="root" data-v-6292888b data-v-2fee3d2a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-aef52c28></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6c002a39><div class="content-container" data-v-6c002a39><!--[--><!--]--><!----><main class="main" data-v-6c002a39><div style="position:relative;" class="vp-doc _wui_guide_notes_hooks" data-v-6c002a39><div><h1 id="hooks" tabindex="-1">hooks <a class="header-anchor" href="#hooks" aria-label="Permalink to &quot;hooks&quot;">​</a></h1><h2 id="usechildren-ts" tabindex="-1">useChildren.ts <a class="header-anchor" href="#usechildren-ts" aria-label="Permalink to &quot;useChildren.ts&quot;">​</a></h2><h3 id="usechildren" tabindex="-1">useChildren <a class="header-anchor" href="#usechildren" aria-label="Permalink to &quot;useChildren&quot;">​</a></h3><ul><li>导出了<code>publicChildren</code>,<code>linkChildren</code></li><li><code>publicChildren</code>：元素下的子元素</li><li><code>linkChildren</code>：接收一个value入参 <ul><li>通过 provide 提供了一个对象，包括<code>link、unlink、internalChildren、children、value</code></li><li><code>link</code>：往公共子元素数组中收集并排序（链接子元素）</li><li><code>unlink</code>: 解除子元素链接</li><li><code>value</code>：公共变量</li></ul></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export function useChildren&lt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  // eslint-disable-next-line @typescript-eslint/no-explicit-any</span></span>
<span class="line"><span style="color:#A6ACCD;">  Child extends ComponentPublicInstance = ComponentPublicInstance&lt;object, any&gt;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  ProvideValue = never</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;(key: InjectionKey&lt;ProvideValue&gt;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const publicChildren: Child[] = reactive([])</span></span>
<span class="line"><span style="color:#A6ACCD;">  const internalChildren: ComponentInternalInstance[] = reactive([])</span></span>
<span class="line"><span style="color:#A6ACCD;">  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion</span></span>
<span class="line"><span style="color:#A6ACCD;">  const parent = getCurrentInstance()!</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const linkChildren = (value?: ProvideValue) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    const link = (child: ComponentInternalInstance) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">      if (child.proxy) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        internalChildren.push(child)</span></span>
<span class="line"><span style="color:#A6ACCD;">        publicChildren.push(child.proxy as Child)</span></span>
<span class="line"><span style="color:#A6ACCD;">        sortChildren(parent, publicChildren, internalChildren)</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    const unlink = (child: ComponentInternalInstance) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">      const index = internalChildren.indexOf(child)</span></span>
<span class="line"><span style="color:#A6ACCD;">      publicChildren.splice(index, 1)</span></span>
<span class="line"><span style="color:#A6ACCD;">      internalChildren.splice(index, 1)</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    provide(</span></span>
<span class="line"><span style="color:#A6ACCD;">      key,</span></span>
<span class="line"><span style="color:#A6ACCD;">      Object.assign(</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">          link,</span></span>
<span class="line"><span style="color:#A6ACCD;">          unlink,</span></span>
<span class="line"><span style="color:#A6ACCD;">          children: publicChildren,</span></span>
<span class="line"><span style="color:#A6ACCD;">          internalChildren</span></span>
<span class="line"><span style="color:#A6ACCD;">        },</span></span>
<span class="line"><span style="color:#A6ACCD;">        value</span></span>
<span class="line"><span style="color:#A6ACCD;">      )</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  return {</span></span>
<span class="line"><span style="color:#A6ACCD;">    children: publicChildren,</span></span>
<span class="line"><span style="color:#A6ACCD;">    linkChildren</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h3 id="sortchildren" tabindex="-1">sortChildren <a class="header-anchor" href="#sortchildren" aria-label="Permalink to &quot;sortChildren&quot;">​</a></h3><ul><li>用于对子组件列表进行排序。</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export function sortChildren(</span></span>
<span class="line"><span style="color:#A6ACCD;">  parent: ComponentInternalInstance,</span></span>
<span class="line"><span style="color:#A6ACCD;">  publicChildren: ComponentPublicInstance[],</span></span>
<span class="line"><span style="color:#A6ACCD;">  internalChildren: ComponentInternalInstance[]</span></span>
<span class="line"><span style="color:#A6ACCD;">) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const vnodes = flattenVNodes(parent.subTree.children)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  internalChildren.sort(</span></span>
<span class="line"><span style="color:#A6ACCD;">    (a, b) =&gt; findVNodeIndex(vnodes, a.vnode) - findVNodeIndex(vnodes, b.vnode)</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion</span></span>
<span class="line"><span style="color:#A6ACCD;">  const orderedPublicChildren = internalChildren.map(item =&gt; item.proxy!)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  publicChildren.sort((a, b) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    const indexA = orderedPublicChildren.indexOf(a)</span></span>
<span class="line"><span style="color:#A6ACCD;">    const indexB = orderedPublicChildren.indexOf(b)</span></span>
<span class="line"><span style="color:#A6ACCD;">    return indexA - indexB</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h3 id="flattenvnodes" tabindex="-1">flattenVNodes <a class="header-anchor" href="#flattenvnodes" aria-label="Permalink to &quot;flattenVNodes&quot;">​</a></h3><ul><li>将渲染子树中的所有虚拟节点展平为一维数组。</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export function flattenVNodes(children: VNodeNormalizedChildren) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const result: VNode[] = []</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const traverse = (children: VNodeNormalizedChildren) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (Array.isArray(children)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      children.forEach(child =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">        if (isVNode(child)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">          result.push(child)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">          if (child.component?.subTree) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            result.push(child.component.subTree)</span></span>
<span class="line"><span style="color:#A6ACCD;">            traverse(child.component.subTree.children)</span></span>
<span class="line"><span style="color:#A6ACCD;">          }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">          if (child.children) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            traverse(child.children)</span></span>
<span class="line"><span style="color:#A6ACCD;">          }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">      })</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  traverse(children)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  return result</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h3 id="findvnodeindex" tabindex="-1">findVNodeIndex <a class="header-anchor" href="#findvnodeindex" aria-label="Permalink to &quot;findVNodeIndex&quot;">​</a></h3><ul><li>查找指定虚拟节点在 vnodes 数组中的索引位置。</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">const findVNodeIndex = (vnodes: VNode[], vnode: VNode) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const index = vnodes.indexOf(vnode)</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (index === -1) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    return vnodes.findIndex(</span></span>
<span class="line"><span style="color:#A6ACCD;">      item =&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        vnode.key !== undefined &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">        vnode.key !== null &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">        item.type === vnode.type &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">        item.key === vnode.key</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">  return index</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="useparent-ts" tabindex="-1">useParent.ts <a class="header-anchor" href="#useparent-ts" aria-label="Permalink to &quot;useParent.ts&quot;">​</a></h2><h3 id="useparent" tabindex="-1">useParent <a class="header-anchor" href="#useparent" aria-label="Permalink to &quot;useParent&quot;">​</a></h3><ul><li>通过<code>inject</code>获取了在<code>useChildren</code>中<code>provide</code>的内容</li><li>调用 <code>useChildren</code>，更新 <code>useChildren</code> 中数据</li><li>卸载时取消链接</li><li>返回<code>parent</code>、<code>index(下标)</code></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export function useParent&lt;T&gt;(key: InjectionKey&lt;ParentProvide&lt;T&gt;&gt;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const parent = inject(key, null)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  if (parent) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion</span></span>
<span class="line"><span style="color:#A6ACCD;">    const instance = getCurrentInstance()!</span></span>
<span class="line"><span style="color:#A6ACCD;">    const { link, unlink, internalChildren } = parent</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    link(instance)</span></span>
<span class="line"><span style="color:#A6ACCD;">    onUnmounted(() =&gt; unlink(instance))</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    const index = computed(() =&gt; internalChildren.indexOf(instance))</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    return {</span></span>
<span class="line"><span style="color:#A6ACCD;">      parent,</span></span>
<span class="line"><span style="color:#A6ACCD;">      index</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  return {</span></span>
<span class="line"><span style="color:#A6ACCD;">    parent: null,</span></span>
<span class="line"><span style="color:#A6ACCD;">    index: ref(-1)</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="usecustomfieldvalue" tabindex="-1">useCustomFieldValue <a class="header-anchor" href="#usecustomfieldvalue" aria-label="Permalink to &quot;useCustomFieldValue&quot;">​</a></h2><ul><li><code>CustomFieldInjectionValue</code> 定义类型</li><li><code>InjectionKey</code> 定义注入类型为<code>CustomFieldInjectionValue</code></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export type CustomFieldInjectionValue = {</span></span>
<span class="line"><span style="color:#A6ACCD;">  customValue: Ref&lt;(() =&gt; unknown) | undefined&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  resetValidation: () =&gt; void</span></span>
<span class="line"><span style="color:#A6ACCD;">  validateWithTrigger: (trigger: &#39;onBlur&#39; | &#39;onChange&#39; | &#39;onSubmit&#39;) =&gt; void</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export const CUSTOM_FIELD_INJECTION_KEY: InjectionKey&lt;CustomFieldInjectionValue&gt; =</span></span>
<span class="line"><span style="color:#A6ACCD;">  Symbol(&#39;w-field&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export function useCustomFieldValue(customValue: () =&gt; unknown) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const field = inject(CUSTOM_FIELD_INJECTION_KEY, null)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  if (field &amp;&amp; !field.customValue.value) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    field.customValue.value = customValue</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    watch(customValue, () =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">      field.resetValidation()</span></span>
<span class="line"><span style="color:#A6ACCD;">      field.validateWithTrigger(&#39;onChange&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    })</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="use-expose-ts" tabindex="-1">use-expose.ts <a class="header-anchor" href="#use-expose-ts" aria-label="Permalink to &quot;use-expose.ts&quot;">​</a></h2><ul><li><code>vue</code> 中 <code>expose</code> 的升级版</li><li><a href="./vue.html#expose">expose</a></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export function useExpose&lt;T = Record&lt;string, any&gt;&gt;(apis: T) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const instance = getCurrentInstance()</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (instance) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    extend(instance.proxy as object, apis)</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="use-lazy-render-ts" tabindex="-1">use-lazy-render.ts <a class="header-anchor" href="#use-lazy-render-ts" aria-label="Permalink to &quot;use-lazy-render.ts&quot;">​</a></h2><ul><li>依据入参的<code>show</code>作为<code>watch</code>的监听源。</li><li><code>(render: () =&gt; JSX.Element)</code> 参数列表，定义render</li><li><code>(render: () =&gt; JSX.Element) =&gt; () =&gt; inited.value ? render() : null</code> 在参数列表中定义render函数，这里返回一个函数<code>() =&gt; inited.value ? render() : null</code>,这个函数根据<code>inited.value</code>判断是否调用<code>render()</code></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export function useLazyRender(show: WatchSource&lt;boolean | undefined&gt;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const inited = ref(false)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    show,</span></span>
<span class="line"><span style="color:#A6ACCD;">    value =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">      if (value) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        inited.value = value</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    { immediate: true }</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  return (render: () =&gt; JSX.Element) =&gt; () =&gt; inited.value ? render() : null</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="useeventlistener" tabindex="-1">useEventListener <a class="header-anchor" href="#useeventlistener" aria-label="Permalink to &quot;useEventListener&quot;">​</a></h2><ul><li>利用函数重载，定义多个函数签名，以便在调用函数时根据传入的参数类型和数量来自动选择正确的函数签名。</li><li>如果当前不在浏览器环境中，直接退出。</li><li>target: 监听的目标，如果是元素则使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener" target="_blank" rel="noreferrer">addEventListener</a>,如果是<code>Ref</code>对象则使用<code>watch</code>监听，并在值变化后自动添加或移除事件监听器。</li><li>capture：一个布尔值，表示 <code>listener</code> 会在该类型的事件捕获阶段传播到该 <code>EventTarget</code> 时触发。</li><li>一个布尔值，设置为 true 时，表示 <code>listener</code> 永远不会调用 preventDefault()。</li><li>定义了两个内部函数 add 和 remove，用于添加和移除事件监听器。这两个函数会根据传入的目标元素和配置选项来添加或移除事件监听器。</li><li>在组件卸载时（使用 onUnmounted）和组件失活时（使用 onDeactivated）移除事件监听器。</li><li>在组件挂载时（使用 onMountedOrActivated）添加事件监听器。</li><li>返回一个函数，用于手动移除事件监听器。</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export type UseEventListenerOptions = {</span></span>
<span class="line"><span style="color:#A6ACCD;">  target?: TargetRef</span></span>
<span class="line"><span style="color:#A6ACCD;">  capture?: boolean</span></span>
<span class="line"><span style="color:#A6ACCD;">  passive?: boolean</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export function useEventListener&lt;K extends keyof DocumentEventMap&gt;(</span></span>
<span class="line"><span style="color:#A6ACCD;">  type: K,</span></span>
<span class="line"><span style="color:#A6ACCD;">  listener: (event: DocumentEventMap[K]) =&gt; void,</span></span>
<span class="line"><span style="color:#A6ACCD;">  options?: UseEventListenerOptions</span></span>
<span class="line"><span style="color:#A6ACCD;">): () =&gt; void</span></span>
<span class="line"><span style="color:#A6ACCD;">export function useEventListener(</span></span>
<span class="line"><span style="color:#A6ACCD;">  type: string,</span></span>
<span class="line"><span style="color:#A6ACCD;">  listener: EventListener,</span></span>
<span class="line"><span style="color:#A6ACCD;">  options?: UseEventListenerOptions</span></span>
<span class="line"><span style="color:#A6ACCD;">): () =&gt; void</span></span>
<span class="line"><span style="color:#A6ACCD;">export function useEventListener(</span></span>
<span class="line"><span style="color:#A6ACCD;">  type: string,</span></span>
<span class="line"><span style="color:#A6ACCD;">  listener: EventListener,</span></span>
<span class="line"><span style="color:#A6ACCD;">  options: UseEventListenerOptions = {}</span></span>
<span class="line"><span style="color:#A6ACCD;">) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (!inBrowser) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    return</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const { target = window, passive = false, capture = false } = options</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  let cleaned = false</span></span>
<span class="line"><span style="color:#A6ACCD;">  let attached: boolean</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const add = (target?: TargetRef) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (cleaned) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      return</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    const element = unref(target)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    if (element &amp;&amp; !attached) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      element.addEventListener(type, listener, {</span></span>
<span class="line"><span style="color:#A6ACCD;">        capture,</span></span>
<span class="line"><span style="color:#A6ACCD;">        passive</span></span>
<span class="line"><span style="color:#A6ACCD;">      })</span></span>
<span class="line"><span style="color:#A6ACCD;">      attached = true</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const remove = (target?: TargetRef) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (cleaned) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      return</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    const element = unref(target)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    if (element &amp;&amp; attached) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      element.removeEventListener(type, listener, capture)</span></span>
<span class="line"><span style="color:#A6ACCD;">      attached = false</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  onUnmounted(() =&gt; remove(target))</span></span>
<span class="line"><span style="color:#A6ACCD;">  onDeactivated(() =&gt; remove(target))</span></span>
<span class="line"><span style="color:#A6ACCD;">  onMountedOrActivated(() =&gt; add(target))</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  let stopWatch: WatchStopHandle</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  if (isRef(target)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    stopWatch = watch(target, (val, oldVal) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">      remove(oldVal)</span></span>
<span class="line"><span style="color:#A6ACCD;">      add(val)</span></span>
<span class="line"><span style="color:#A6ACCD;">    })</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  /**</span></span>
<span class="line"><span style="color:#A6ACCD;">   * Clean up the event listener</span></span>
<span class="line"><span style="color:#A6ACCD;">   */</span></span>
<span class="line"><span style="color:#A6ACCD;">  return () =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    stopWatch?.()</span></span>
<span class="line"><span style="color:#A6ACCD;">    remove(target)</span></span>
<span class="line"><span style="color:#A6ACCD;">    cleaned = true</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="use-global-z-index-ts" tabindex="-1">use-global-z-index.ts <a class="header-anchor" href="#use-global-z-index-ts" aria-label="Permalink to &quot;use-global-z-index.ts&quot;">​</a></h2><ul><li>全局管理<code>ZIndex</code></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">let globalZIndex = 2000</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">/** the global z-index is automatically incremented after reading */</span></span>
<span class="line"><span style="color:#A6ACCD;">export const useGlobalZIndex = () =&gt; ++globalZIndex</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">/** reset the global z-index */</span></span>
<span class="line"><span style="color:#A6ACCD;">export const setGlobalZIndex = (val: number) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">  globalZIndex = val</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="usescrollparent" tabindex="-1">useScrollParent <a class="header-anchor" href="#usescrollparent" aria-label="Permalink to &quot;useScrollParent&quot;">​</a></h2><ul><li>用于获取元素的滚动容器，<code>getScrollParent</code> 函数用于找到元素 el <code>的滚动容器，useScrollParent</code> 函数则是将 <code>getScrollParent</code> 封装成一个 <code>Hook</code>。</li><li><code>getScrollParent</code> 解析: <ul><li>从当前元素一直往上遍历父节点，直到节点为空、根节点或者遍历到了非元素节点为止。</li><li>使用 window.getComputedStyle 获取元素的样式对象，从而得到 overflowY 属性值并使用正则表达式匹配是否包含 scroll、auto 或者 overlay 等关键词，如果匹配成功，则返回该元素作为滚动容器。</li><li>否则继续向上遍历父节点。最终返回的结果是根节点 root（默认是 window 对象）。</li></ul></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">type ScrollElement = HTMLElement | Window</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">const overflowScrollReg = /scroll|auto|overlay/i</span></span>
<span class="line"><span style="color:#A6ACCD;">const defaultRoot = inBrowser ? window : undefined</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">function isElement(node: Element) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const ELEMENT_NODE_TYPE = 1</span></span>
<span class="line"><span style="color:#A6ACCD;">  return (</span></span>
<span class="line"><span style="color:#A6ACCD;">    node.tagName !== &#39;HTML&#39; &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">    node.tagName !== &#39;BODY&#39; &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">    node.nodeType === ELEMENT_NODE_TYPE</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export function getScrollParent(</span></span>
<span class="line"><span style="color:#A6ACCD;">  el: Element,</span></span>
<span class="line"><span style="color:#A6ACCD;">  root: ScrollElement | undefined = defaultRoot</span></span>
<span class="line"><span style="color:#A6ACCD;">) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  let node = el</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  while (node &amp;&amp; node !== root &amp;&amp; isElement(node)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    const { overflowY } = window.getComputedStyle(node)</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (overflowScrollReg.test(overflowY)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      return node</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    node = node.parentNode as Element</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  return root</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export function useScrollParent(</span></span>
<span class="line"><span style="color:#A6ACCD;">  el: Ref&lt;Element | undefined&gt;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  root: ScrollElement | undefined = defaultRoot</span></span>
<span class="line"><span style="color:#A6ACCD;">) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const scrollParent = ref&lt;Element | Window&gt;()</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  onMounted(() =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (el.value) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      scrollParent.value = getScrollParent(el.value, root)</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  return scrollParent</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="use-touch-ts" tabindex="-1">use-touch.ts <a class="header-anchor" href="#use-touch-ts" aria-label="Permalink to &quot;use-touch.ts&quot;">​</a></h2><ul><li>函数返回了一些变量和方法，包括 <code>startX、startY、deltaX、deltaY、offsetX、offsetY</code> 和 <code>direction</code> 等变量，以及 <code>move、start、reset、isVertical</code> 和 <code>isHorizontal</code> 等方法</li><li><code>start</code> 返回了起始坐标。</li><li><code>reset</code> 方法用于重置各个变量和方向。</li><li><code>move</code> 计算了当前触摸点相对于起始点的偏移量，并根据偏移量计算 deltaX、deltaY、offsetX 和 offsetY 变量的值，同时通过 getDirection 函数判断了滑动方向并保存在 direction 变量中。</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">import { ref } from &#39;vue&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">type Direction = &#39;&#39; | &#39;vertical&#39; | &#39;horizontal&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">function getDirection(x: number, y: number) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (x &gt; y) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    return &#39;horizontal&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">  if (y &gt; x) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    return &#39;vertical&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">  return &#39;&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export function useTouch() {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const startX = ref(0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  const startY = ref(0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  const deltaX = ref(0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  const deltaY = ref(0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  const offsetX = ref(0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  const offsetY = ref(0)</span></span>
<span class="line"><span style="color:#A6ACCD;">  const direction = ref&lt;Direction&gt;(&#39;&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const isVertical = () =&gt; direction.value === &#39;vertical&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  const isHorizontal = () =&gt; direction.value === &#39;horizontal&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const reset = () =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    deltaX.value = 0</span></span>
<span class="line"><span style="color:#A6ACCD;">    deltaY.value = 0</span></span>
<span class="line"><span style="color:#A6ACCD;">    offsetX.value = 0</span></span>
<span class="line"><span style="color:#A6ACCD;">    offsetY.value = 0</span></span>
<span class="line"><span style="color:#A6ACCD;">    direction.value = &#39;&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const start = ((event: TouchEvent) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    reset()</span></span>
<span class="line"><span style="color:#A6ACCD;">    startX.value = event.touches[0].clientX</span></span>
<span class="line"><span style="color:#A6ACCD;">    startY.value = event.touches[0].clientY</span></span>
<span class="line"><span style="color:#A6ACCD;">  }) as EventListener</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const move = ((event: TouchEvent) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    const touch = event.touches[0]</span></span>
<span class="line"><span style="color:#A6ACCD;">    // safari back will set clientX to negative number</span></span>
<span class="line"><span style="color:#A6ACCD;">    deltaX.value = (touch.clientX &lt; 0 ? 0 : touch.clientX) - startX.value</span></span>
<span class="line"><span style="color:#A6ACCD;">    deltaY.value = touch.clientY - startY.value</span></span>
<span class="line"><span style="color:#A6ACCD;">    offsetX.value = Math.abs(deltaX.value)</span></span>
<span class="line"><span style="color:#A6ACCD;">    offsetY.value = Math.abs(deltaY.value)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    // lock direction when distance is greater than a certain value</span></span>
<span class="line"><span style="color:#A6ACCD;">    const LOCK_DIRECTION_DISTANCE = 10</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (</span></span>
<span class="line"><span style="color:#A6ACCD;">      !direction.value ||</span></span>
<span class="line"><span style="color:#A6ACCD;">      (offsetX.value &lt; LOCK_DIRECTION_DISTANCE &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">        offsetY.value &lt; LOCK_DIRECTION_DISTANCE)</span></span>
<span class="line"><span style="color:#A6ACCD;">    ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      direction.value = getDirection(offsetX.value, offsetY.value)</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }) as EventListener</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  return {</span></span>
<span class="line"><span style="color:#A6ACCD;">    move,</span></span>
<span class="line"><span style="color:#A6ACCD;">    start,</span></span>
<span class="line"><span style="color:#A6ACCD;">    reset,</span></span>
<span class="line"><span style="color:#A6ACCD;">    startX,</span></span>
<span class="line"><span style="color:#A6ACCD;">    startY,</span></span>
<span class="line"><span style="color:#A6ACCD;">    deltaX,</span></span>
<span class="line"><span style="color:#A6ACCD;">    deltaY,</span></span>
<span class="line"><span style="color:#A6ACCD;">    offsetX,</span></span>
<span class="line"><span style="color:#A6ACCD;">    offsetY,</span></span>
<span class="line"><span style="color:#A6ACCD;">    direction,</span></span>
<span class="line"><span style="color:#A6ACCD;">    isVertical,</span></span>
<span class="line"><span style="color:#A6ACCD;">    isHorizontal</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h2 id="use-lock-scroll-ts" tabindex="-1">use-lock-scroll.ts <a class="header-anchor" href="#use-lock-scroll-ts" aria-label="Permalink to &quot;use-lock-scroll.ts&quot;">​</a></h2><ul><li><code>rootRef</code>： 元素, <code>shouldLock</code>: 是否控制。</li><li>使用<a href="./hooks.html#use-touch-ts">useTouch</a>获取导出的对象，用于处理触摸事件。</li><li><code>DIRECTION_UP</code> 和 <code>DIRECTION_DOWN</code>：表示向上和向下方向的常量。</li><li><code>onTouchMove</code>：是一个处理 <code>touchmove</code> 事件的函数，用于判断是否应该阻止默认行为。具体来说，它会根据触摸事件的方向和滚动条的位置来判断是否需要阻止默认行为。</li><li><code>lock</code> 和 <code>unlock</code>：分别用于锁定和解锁滚动。它们会添加或删除一些事件监听器，并向文档的 <code>body</code> 元素添加或删除一个类，以实现滚动锁定的效果。</li><li><code>init</code> 和 <code>destroy</code>：分别用于初始化和销毁滚动锁定。它们会在组件挂载或激活时、组件失活时以及组件卸载前分别调用。</li><li><code>watch</code>：用于监听 <code>shouldLock</code> 函数的返回值，以决定是否锁定滚动。</li><li><code>onTouchMove</code> 函数会获取当前触摸事件的方向和滚动条的位置，并根据这些信息判断是否需要阻止默认行为。 <ul><li><code>touch.move(event)</code>：更新触摸事件的状态。</li><li><code>const el = getScrollParent(event.target as Element, rootRef.value) as HTMLElement</code>：获取触摸事件所在的可滚动元素。<a href="./hooks.html#usescrollparent">getScrollParent</a></li><li><code>scrollHeight</code>：表示元素的滚动高度，即元素的内容高度加上内边距和边框高度。</li><li><code>offsetHeight</code>：表示元素的高度，包括内边距、边框和滚动条（如果存在）的高度。</li><li><code>scrollTop</code>：表示元素的滚动位置，即元素顶部被隐藏的像素数。</li><li><code>let status = &#39;11&#39;</code>：初始化状态码。</li><li><code>if (scrollTop === 0)</code>：如果滚动条已经滚动到顶部，则更新状态码。</li><li><code>else if (scrollTop + offsetHeight &gt;= scrollHeight)</code>：如果滚动条已经滚动到底部，则更新状态码。</li><li><code>if (status !== &#39;11&#39; &amp;&amp; touch.isVertical() &amp;&amp; !(parseInt(status, 2) &amp; parseInt(direction, 2)))</code>：如果状态码不为 &#39;11&#39;，并且触摸方向为垂直方向，并且状态码与方向码不匹配，则阻止默认行为。</li></ul></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">let totalLockCount = 0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">const BODY_LOCK_CLASS = &#39;w-overflow-hidden&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">export function useLockScroll(</span></span>
<span class="line"><span style="color:#A6ACCD;">  rootRef: Ref&lt;HTMLElement | undefined&gt;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  shouldLock: () =&gt; boolean</span></span>
<span class="line"><span style="color:#A6ACCD;">) {</span></span>
<span class="line"><span style="color:#A6ACCD;">  const touch = useTouch()</span></span>
<span class="line"><span style="color:#A6ACCD;">  const DIRECTION_UP = &#39;01&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  const DIRECTION_DOWN = &#39;10&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const onTouchMove = (event: TouchEvent) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    touch.move(event)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    const direction = touch.deltaY.value &gt; 0 ? DIRECTION_DOWN : DIRECTION_UP</span></span>
<span class="line"><span style="color:#A6ACCD;">    const el = getScrollParent(</span></span>
<span class="line"><span style="color:#A6ACCD;">      event.target as Element,</span></span>
<span class="line"><span style="color:#A6ACCD;">      rootRef.value</span></span>
<span class="line"><span style="color:#A6ACCD;">    ) as HTMLElement</span></span>
<span class="line"><span style="color:#A6ACCD;">    const { scrollHeight, offsetHeight, scrollTop } = el</span></span>
<span class="line"><span style="color:#A6ACCD;">    let status = &#39;11&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    if (scrollTop === 0) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      status = offsetHeight &gt;= scrollHeight ? &#39;00&#39; : &#39;01&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    } else if (scrollTop + offsetHeight &gt;= scrollHeight) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      status = &#39;10&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    if (</span></span>
<span class="line"><span style="color:#A6ACCD;">      status !== &#39;11&#39; &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">      touch.isVertical() &amp;&amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">      !(parseInt(status, 2) &amp; parseInt(direction, 2))</span></span>
<span class="line"><span style="color:#A6ACCD;">    ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      preventDefault(event, true)</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const lock = () =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    document.addEventListener(&#39;touchstart&#39;, touch.start)</span></span>
<span class="line"><span style="color:#A6ACCD;">    document.addEventListener(&#39;touchmove&#39;, onTouchMove, { passive: false })</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    if (!totalLockCount) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      document.body.classList.add(BODY_LOCK_CLASS)</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">    totalLockCount++</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const unlock = () =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    if (totalLockCount) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      document.removeEventListener(&#39;touchstart&#39;, touch.start)</span></span>
<span class="line"><span style="color:#A6ACCD;">      document.removeEventListener(&#39;touchmove&#39;, onTouchMove)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">      totalLockCount--</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">      if (!totalLockCount) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        document.body.classList.remove(BODY_LOCK_CLASS)</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const init = () =&gt; shouldLock() &amp;&amp; lock()</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  const destroy = () =&gt; shouldLock() &amp;&amp; unlock()</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  onMountedOrActivated(init)</span></span>
<span class="line"><span style="color:#A6ACCD;">  onDeactivated(destroy)</span></span>
<span class="line"><span style="color:#A6ACCD;">  onBeforeUnmount(destroy)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">  watch(shouldLock, value =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">    value ? lock() : unlock()</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-6c002a39 data-v-1436ca6b><!--[--><!--]--><!----><div class="prev-next" data-v-1436ca6b><div class="pager" data-v-1436ca6b><a class="pager-link prev" href="/wui/guide/notes/utilsFunction.html" data-v-1436ca6b><span class="desc" data-v-1436ca6b>Previous page</span><span class="title" data-v-1436ca6b>工具函数</span></a></div><div class="has-prev pager" data-v-1436ca6b><a class="pager-link next" href="/wui/guide/notes/loading.html" data-v-1436ca6b><span class="desc" data-v-1436ca6b>Next page</span><span class="title" data-v-1436ca6b>Loading 加载</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-74341577 data-v-238d219c><div class="container" data-v-238d219c><p class="message" data-v-238d219c>Released under the MIT License.</p><p class="copyright" data-v-238d219c>Copyright © 2022-present WELL</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"component_button.md\":\"f6d8b843\",\"component_space.md\":\"f07474e8\",\"guide_notes_checkboxgroup.md\":\"41651b88\",\"component_cell.md\":\"2c3eafe6\",\"component_radio.md\":\"b5bd31a9\",\"guide_notes_checker.md\":\"1434aa55\",\"guide_notes_icon.md\":\"9683a31b\",\"guide_notes_col.md\":\"77584c56\",\"guide_notes_hooks.md\":\"89ec0107\",\"guide_notes_overlay.md\":\"cbb2bf9a\",\"index.md\":\"7a49462a\",\"guide_notes_button.md\":\"b68d649f\",\"component_badge.md\":\"256eb5f0\",\"guide_installation.md\":\"084584db\",\"guide_notes_badge.md\":\"88435082\",\"guide_notes_checkbox.md\":\"2037a5cb\",\"component_layout.md\":\"7891fb0e\",\"component_icon.md\":\"f6cc1713\",\"component_popup.md\":\"7a45fac7\",\"guide_notes_row.md\":\"b034780f\",\"guide_notes_radiogroup.md\":\"760403e3\",\"guide_notes_loading.md\":\"be041b67\",\"guide_notes_space.md\":\"b2b34f81\",\"guide_notes_radio.md\":\"db490320\",\"guide_notes_project.md\":\"16f5b803\",\"guide_notes_popup.md\":\"1887c216\",\"guide_notes_utilsfunction.md\":\"8b88f81d\",\"guide_quiestart.md\":\"ec427c1c\",\"guide_notes_cell.md\":\"2158182a\",\"guide_notes_toast.md\":\"30dc88aa\",\"component_loading.md\":\"f9ba3229\",\"component_toast.md\":\"31fc3224\",\"component_checkbox.md\":\"333468ba\",\"guide_notes_vue.md\":\"835cac94\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"W-UI\",\"description\":\"W-UI\",\"base\":\"/wui/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"lastUpdated\":\"最后更新时间\",\"docsDir\":\"docs\",\"editLinks\":true,\"editLinkText\":\"编辑此网站\",\"repo\":\"https://gitee.com/login\",\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2022-present WELL\"},\"nav\":[{\"text\":\"指南\",\"link\":\"/guide/installation\",\"activeMatch\":\"/guide/\"},{\"text\":\"组件\",\"link\":\"/component/button\",\"activeMatch\":\"/component/button\"}],\"sidebar\":{\"/guide/\":[{\"text\":\"指南\",\"items\":[{\"text\":\"安装\",\"link\":\"/guide/installation\"},{\"text\":\"快速开始\",\"link\":\"/guide/quieStart\"}]},{\"text\":\"笔记\",\"items\":[{\"text\":\"工程搭建\",\"link\":\"/guide/notes/project\"},{\"text\":\"vue\",\"link\":\"/guide/notes/vue\"},{\"text\":\"工具函数\",\"link\":\"/guide/notes/utilsFunction\"},{\"text\":\"hooks\",\"link\":\"/guide/notes/hooks\"},{\"text\":\"Loading 加载\",\"link\":\"/guide/notes/loading\"},{\"text\":\"Badge 徽标\",\"link\":\"/guide/notes/badge\"},{\"text\":\"Icon 图标\",\"link\":\"/guide/notes/icon\"},{\"text\":\"Button 按钮\",\"link\":\"/guide/notes/button\"},{\"text\":\"Cell 单元格\",\"link\":\"/guide/notes/cell\"},{\"text\":\"Space 间距\",\"link\":\"/guide/notes/space\"},{\"text\":\"Layout Row \",\"link\":\"/guide/notes/row\"},{\"text\":\"Layout Col\",\"link\":\"/guide/notes/col\"},{\"text\":\"Checker\",\"link\":\"/guide/notes/checker\"},{\"text\":\"Radio\",\"link\":\"/guide/notes/radio\"},{\"text\":\"RadioGroup\",\"link\":\"/guide/notes/radioGroup\"},{\"text\":\"Checkbox\",\"link\":\"/guide/notes/checkbox\"},{\"text\":\"CheckboxGroup\",\"link\":\"/guide/notes/checkboxGroup\"},{\"text\":\"Overlay\",\"link\":\"/guide/notes/overlay\"},{\"text\":\"Popup\",\"link\":\"/guide/notes/popup\"},{\"text\":\"Toast\",\"link\":\"/guide/notes/toast\"}]}],\"/component/\":[{\"text\":\"基础组件\",\"items\":[{\"text\":\"Button 按钮\",\"link\":\"/component/button\"},{\"text\":\"Cell 单元格\",\"link\":\"/component/cell\"},{\"text\":\"Icon 图标\",\"link\":\"/component/icon\"},{\"text\":\"Layout 布局\",\"link\":\"/component/layout\"},{\"text\":\"Space 间距\",\"link\":\"/component/space\"},{\"text\":\"Popup 弹窗\",\"link\":\"/component/popup\"},{\"text\":\"Toast 轻提示\",\"link\":\"/component/toast\"}]},{\"text\":\"表单组件\",\"items\":[{\"text\":\"Radio 单选框\",\"link\":\"/component/radio\"},{\"text\":\"Checkbox 复选框\",\"link\":\"/component/checkbox\"}]},{\"text\":\"反馈组件\",\"items\":[{\"text\":\"Loading 加载\",\"link\":\"/component/loading\"}]},{\"text\":\"展示组件\",\"items\":[{\"text\":\"Badge 徽标\",\"link\":\"/component/badge\"}]}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>